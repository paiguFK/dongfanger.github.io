

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2 功能测试用例自动生成算法Pairwise &mdash; dongfanger latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/readmore.js"></script>
        <script src="../_static/js/baidutongji.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Annual Summary" href="../chapters/Annual%20Summary.html" />
    <link rel="prev" title="1 5分钟轻松学正则表达式" href="001-5%E5%88%86%E9%92%9F%E8%BD%BB%E6%9D%BE%E5%AD%A6%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> dongfanger
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%20Basic.html">Python Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%20Advance.html">Python Advance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/pytest.html">pytest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/tep.html">tep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/teprunner.html">teprunner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django.html">Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django%20REST%20framework.html">Django REST framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Flask.html">Flask</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Locust.html">Locust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Java%20Basic.html">Java Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/JMeter.html">JMeter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/JUnit.html">JUnit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Mockito.html">Mockito</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Spring%20Boot.html">Spring Boot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Maven.html">Maven</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/MyBatis.html">MyBatis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Message%20Queue.html">Message Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Nginx.html">Nginx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/DevOps.html">DevOps</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/Single%20Article.html">Single Article</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="001-5%E5%88%86%E9%92%9F%E8%BD%BB%E6%9D%BE%E5%AD%A6%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html">1 5分钟轻松学正则表达式</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2 功能测试用例自动生成算法Pairwise</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Pairwise算法是什么</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python">Python实现</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Annual%20Summary.html">Annual Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Bildungsroman.html">Bildungsroman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../link.html">Link</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">dongfanger</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../chapters/Single%20Article.html">Single Article</a> &raquo;</li>
        
      <li>2 功能测试用例自动生成算法Pairwise</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Single Article/002-功能测试用例自动生成算法Pairwise.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pairwise">
<h1>2 功能测试用例自动生成算法Pairwise<a class="headerlink" href="#pairwise" title="Permalink to this headline">¶</a></h1>
<p><img alt="image1" src="../_images/wanggang15.png" /></p>
<div class="section" id="id1">
<h2>Pairwise算法是什么<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>对于以下测试场景：</p>
<ul class="simple">
<li><p>浏览器：M，O，P</p></li>
<li><p>操作平台：W（windows），L（linux），i（ios）</p></li>
<li><p>语言：C（chinese），E（english）</p></li>
</ul>
<p>该如何设计功能测试用例呢？</p>
<p>根据数学统计分析，73%的缺陷（单因子是35%，双因子是38%）是由单因子或2个因子相互作用产生的。19%的缺陷是由3个因子相互作用产生的。也就是说，<strong>大多数的bug都是条件的两两组合造成的</strong>。</p>
<p>Pairwise算法是L. L.
Thurstone在1927年首先提出来的，他是美国的一位心理统计学家。Pairwise算法基于两两组合，过滤出性价比高的用例集。它的思路是：<strong>如果某一组用例的两两组合结果，在其他组合中均出现，就删除该组用例，从而精简用例</strong>。</p>
<p>对于上述测试场景，可以通过笛卡尔积设计18条两两组合的测试用例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1，M W C
2，M W E
3，M L C
4，M L E
5，M I C
6，M I E
7，O W C
8，O W E
9，O L C
10，O L E
11，O I C
12，O I E
13，P W C
14，P W E
15，P L C
16，P L E
17，P I C
18，P I E
</pre></div>
</div>
<p>对于第18条用例<code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">I</span> <span class="pre">E</span></code>来说，两两组合是<code class="docutils literal notranslate"><span class="pre">PI</span> <span class="pre">，PE</span> <span class="pre">，IE</span></code>，<code class="docutils literal notranslate"><span class="pre">PI</span></code>在17号，<code class="docutils literal notranslate"><span class="pre">PE</span></code>在16号，<code class="docutils literal notranslate"><span class="pre">IE</span></code>在12号出现过，所以第18条用例可以过滤掉。按照这个算法继续过滤，最终剩下9条用例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1，M W C
4，M L E
6，M I E
7，O W E
9，O L C
11，O I C
14，P W E
15，P L C
17，P I C
</pre></div>
</div>
<p><strong>用例减少了50%！</strong>而且维度越多越明显，当有10个维度的时候<code class="docutils literal notranslate"><span class="pre">4*4*4*4*3*3*3*2*2*2</span></code>=55296个测试case，pairwise为24个，是原始测试用例规模的0.04%。</p>
</div>
<div class="section" id="python">
<h2>Python实现<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>源码已上传：<a class="reference external" href="https://github.com/dongfanger/python-tools/blob/main/pairwise.py">https://github.com/dongfanger/python-tools/blob/main/pairwise.py</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1">## encoding=utf-8</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">@Author  :  Don</span>
<span class="sd">@Date    :  2021/11/03 20:34</span>
<span class="sd">@Desc    :</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">stdout</span>

<span class="kn">from</span> <span class="nn">loguru</span> <span class="kn">import</span> <span class="n">logger</span>


<span class="k">def</span> <span class="nf">parewise</span><span class="p">(</span><span class="n">option</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;pairwise算法&quot;&quot;&quot;</span>
    <span class="n">cp</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 笛卡尔积</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 两两拆分</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;itertools.product&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">option</span><span class="p">))):</span>
        <span class="n">cp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;笛卡尔积:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">cp</span><span class="p">))</span>
    <span class="n">del_row</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">bar</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>  <span class="c1"># 对每行用例进行匹配</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">100</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">bar</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>  <span class="c1"># 对每行用例的两两拆分进行判断，是否出现在其他行</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">i2</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s2</span><span class="p">))</span> <span class="k">if</span> <span class="n">s2</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]:</span>  <span class="c1"># 找同一列</span>
                <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">s2</span><span class="p">[</span><span class="n">i2</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="n">flag</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>  <span class="c1"># 同一列没找到，不用找剩余列了</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
            <span class="n">del_row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">s2</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="n">cp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cp</span><span class="p">))</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">del_row</span><span class="p">]</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;过滤后:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">res</span>


<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;进度条&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">jd</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\r</span><span class="s1"> </span><span class="si">%2d%%</span><span class="s1"> [</span><span class="si">%s%s</span><span class="s1">]&#39;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;■&#39;</span> <span class="o">*</span> <span class="n">c</span>
    <span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;□&#39;</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">jd</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">pl</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">]]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">parewise</span><span class="p">(</span><span class="n">pl</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>输出结果：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> 100% [■■■■■■■■■■]
(&#39;M&#39;, &#39;W&#39;, &#39;E&#39;)
(&#39;M&#39;, &#39;L&#39;, &#39;E&#39;)
(&#39;M&#39;, &#39;I&#39;, &#39;C&#39;)
(&#39;O&#39;, &#39;W&#39;, &#39;E&#39;)
(&#39;O&#39;, &#39;L&#39;, &#39;E&#39;)
(&#39;O&#39;, &#39;I&#39;, &#39;C&#39;)
(&#39;P&#39;, &#39;W&#39;, &#39;C&#39;)
(&#39;P&#39;, &#39;L&#39;, &#39;C&#39;)
(&#39;P&#39;, &#39;I&#39;, &#39;E&#39;)
2021-11-07 11:38:56.850 | INFO     | __main__:parewise:24 - 笛卡尔积:18
2021-11-07 11:38:56.850 | INFO     | __main__:parewise:45 - 过滤后:9
</pre></div>
</div>
<p>参考资料：</p>
<p><a class="reference external" href="https://blog.csdn.net/ztf312/article/details/78792906">https://blog.csdn.net/ztf312/article/details/78792906</a></p>
<p><a class="reference external" href="https://www.cnblogs.com/df888/p/11747616.html">https://www.cnblogs.com/df888/p/11747616.html</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../chapters/Annual%20Summary.html" class="btn btn-neutral float-right" title="Annual Summary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="001-5%E5%88%86%E9%92%9F%E8%BD%BB%E6%9D%BE%E5%AD%A6%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" class="btn btn-neutral float-left" title="1 5分钟轻松学正则表达式" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright dongfanger

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>