

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5 teprunner测试平台开发用例管理不只有增删改查 &mdash; 自动化代码美学 latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/readmore.js"></script>
        <script src="../_static/js/baidutongji.js"></script>
        <script src="../_static/js/valine.js"></script>
        <script src="../_static/js/Valine.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6 teprunner测试平台Django引入pytest完整源码" href="006-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0Django%E5%BC%95%E5%85%A5pytest%E5%AE%8C%E6%95%B4%E6%BA%90%E7%A0%81.html" />
    <link rel="prev" title="4 teprunner测试平台用例前置模块开发" href="004-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%94%A8%E4%BE%8B%E5%89%8D%E7%BD%AE%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> 自动化代码美学
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%E5%85%A5%E9%97%A8.html">Python入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%E8%BF%9B%E9%98%B6.html">Python进阶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/pytest%E5%8E%9F%E7%94%9F%E6%A1%86%E6%9E%B6.html">pytest原生框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/tep%E5%BC%80%E6%BA%90%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7.html">tep开源测试工具</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/teprunner%E5%BC%80%E6%BA%90%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0.html">teprunner开源测试平台</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="001-pytest%E5%86%85%E6%A0%B8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E8%90%BD%E5%9C%B0%E5%88%9D%E4%BD%93%E9%AA%8C.html">1 pytest内核测试平台落地初体验</a></li>
<li class="toctree-l2"><a class="reference internal" href="002-%E5%AD%A6%E4%B9%A0%E7%89%88pytest%E5%86%85%E6%A0%B8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E4%B8%87%E5%AD%97%E9%95%BF%E6%96%87%E5%85%A5%E9%97%A8%E7%AF%87.html">2 学习版pytest内核测试平台开发万字长文入门篇</a></li>
<li class="toctree-l2"><a class="reference internal" href="003-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2%E5%88%B0Linux%E7%B3%BB%E7%BB%9FDocker.html">3 teprunner测试平台部署到Linux系统Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="004-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%94%A8%E4%BE%8B%E5%89%8D%E7%BD%AE%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91.html">4 teprunner测试平台用例前置模块开发</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5 teprunner测试平台开发用例管理不只有增删改查</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">本文开发内容</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">编写后端代码</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">编写前端代码</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">小插曲</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">小结</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="006-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0Django%E5%BC%95%E5%85%A5pytest%E5%AE%8C%E6%95%B4%E6%BA%90%E7%A0%81.html">6 teprunner测试平台Django引入pytest完整源码</a></li>
<li class="toctree-l2"><a class="reference internal" href="007-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E6%B5%8B%E8%AF%95%E8%AE%A1%E5%88%92%E6%89%B9%E9%87%8F%E8%BF%90%E8%A1%8C%E7%94%A8%E4%BE%8B.html">7 teprunner测试平台测试计划批量运行用例</a></li>
<li class="toctree-l2"><a class="reference internal" href="008-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%94%A8%E4%BE%8B%E7%BC%96%E5%86%99%E7%AD%89%E4%BD%93%E9%AA%8C%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8D%87%E7%BA%A7.html">8 teprunner测试平台用例编写等体验响应式升级</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django.html">Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django%20REST%20framework.html">Django REST framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Java%E5%85%A5%E9%97%A8.html">Java入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/JMeter.html">JMeter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B.html">视频教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93.html">年度总结</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%88%90%E9%95%BF%E5%B0%8F%E8%AF%B4.html">成长小说</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">联系方式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../link.html">友情链接</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E9%9D%A2%E8%AF%95%E9%A2%98.html">附录 面试题</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">自动化代码美学</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../chapters/teprunner%E5%BC%80%E6%BA%90%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0.html">teprunner开源测试平台</a> &raquo;</li>
        
      <li>5 teprunner测试平台开发用例管理不只有增删改查</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/teprunner开源测试平台/005-teprunner测试平台开发用例管理不只有增删改查.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="teprunner">
<h1>5 teprunner测试平台开发用例管理不只有增删改查<a class="headerlink" href="#teprunner" title="Permalink to this headline">¶</a></h1>
<p><img alt="image1" src="../_images/wanggang7.png" /></p>
<div class="section" id="id1">
<h2>本文开发内容<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>用例管理是对用例进行增删改查，按照前面文章的思路，把它做出来应该不难，如果你已经自己写好了，那么可以和本文提交的代码比较下看看。除了增删改查，用例管理还需要提供运行用例的入口，在操作列添加一个运行按钮，单条用例运行，并弹窗展示运行结果。用例列表需要能看到每条用例执行情况，添加表格列用于展示，其中“运行结果”列要有超链接，点击查看上次运行结果。为了避免修改别人用例出错，还需要有个复制用例功能。除了在线编辑，平台应支持下载项目环境到本地，无缝切换到PyCharm，让新用户快速上手。综上所述，本文开发内容如下：</p>
<ul class="simple">
<li><p>用例增删改查。</p></li>
<li><p>运行按钮，点击后弹出“运行用例结果”。</p></li>
<li><p>添加表格展示列，其中“运行结果”用颜色区分不同结果状态：passed，failed，error，点击超链接后弹出“查看用例结果”。</p></li>
<li><p>复制按钮，点击后生成一条复制的新用例。</p></li>
<li><p>新增/编辑页面，添加运行按钮。</p></li>
<li><p>运行/查看页面，添加编辑按钮。</p></li>
<li><p>下载环境到本地。</p></li>
</ul>
<p>工作量主要在前端，后端先做一部分。</p>
</div>
<div class="section" id="id2">
<h2>编写后端代码<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>编辑teprunner/urls.py，添加路由：</p>
<p><img alt="image2" src="../_images/image-20210323143812491.png" /></p>
<p>除了增删改查，还添加了2个接口，一个用于获取用例运行的结果，一个用于复制测试用例。</p>
<p>编辑teprunner/models.py，添加模型：</p>
<p><img alt="image3" src="../_images/image-20210323143922387.png" /></p>
<p>第一个Model是Case，没有定义name字段，实际上用例ID和用例描述已经够用了，name不知道填什么，有点多余。第二个Model是CaseResult，会记录运行结果，这个运行结果是从pytest执行日志最后一行的Summary截取出来的，比如1
passed，1
failed，耗时也是从Summary截取出来的。output存放代码运行后打到控制台的输出日志。最后三个字段记录运行环境、运行人和运行时间，运行时间取的数据库记录被添加/更新的时间。添加好以后迁移到数据库中：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python manage.py makemigrations
python manage.py migrate
</pre></div>
</div>
<p>编辑teprunner/serializers.py，添加序列化器，第一个序列化器是CaseSerializer：</p>
<p><img alt="image4" src="../_images/image-20210323144549910.png" /></p>
<p>只关联了Case模型的字段。</p>
<p>第二个序列化器是CaseListSerializer：</p>
<p><img alt="image5" src="../_images/image-20210323144742589.png" /></p>
<p>它主要用来返回用例列表的数据，除了用例本身，还需要用例结果。serializers.SerializerMethodField用于自定义序列化字段，定义好字段后，在下面添加<code class="docutils literal notranslate"><span class="pre">get_前缀+字段名</span></code>的方法，这是Django的规则，然后在方法内部添加取值代码，比如get_result()，instance是指Meta.model定义的模型，这里就等同于Case，通过instance.id获取到Case.id并赋值给case_id变量，从CaseResult的对象中过滤case_id匹配的用例结果，按运行时间倒序，取最新1条结果的result字段的值。其他字段的处理是类似的，runTime这里做了下日期格式化：</p>
<p><img alt="image6" src="../_images/image-20210323145640684.png" /></p>
<p>第三个序列化器是CaseResultSerializer：</p>
<p><img alt="image7" src="../_images/image-20210323150143823.png" /></p>
<p>只关联了CaseResult模型的字段，runTime同样做了日期格式化。从这里也能更清晰的看到，instance就是指的自己！</p>
<p>新建teprunner/views/case.py文件，添加视图，先把简单的两个视图做了，第一个视图是case_result：</p>
<p><img alt="image8" src="../_images/image-20210323150712325.png" /></p>
<p>这里是个知识点，采用&#64;api_view注解的函数视图，如果想用序列化器，那么采用这种方式。</p>
<p>第二个视图是copy_case：</p>
<p><img alt="image9" src="../_images/image-20210323150813428.png" /></p>
<p>根据case_id查找到现有Case对象，在case.desc后面添加<code class="docutils literal notranslate"><span class="pre">--复制</span></code>后缀，其他字段数据复用，保存，就完成复制用例了。</p>
<p>第三个视图是CaseViewSet：</p>
<p><img alt="image10" src="../_images/image-20210323151107769.png" /></p>
<p>继承了ModelViewSet，重写了list列表查询，因为如果不重写，默认返回的结果是serializer_class
=
CaseSerializer序列化器的内容。我们需要的是CaseListSerializer这个序列化器的内容。这里也是一个知识点！如果想在类视图中，使用serializer_class以外的序列化器加分页，采用这种方式。</p>
<p>重写的list方法首先添加了project_id、case_id、desc、api四个过滤条件，与前端的当前项目、用例ID搜索框、用例描述搜索框、API路径搜索框一一对应。<code class="docutils literal notranslate"><span class="pre">__icontains</span></code>表示包含，相当于模糊匹配，<code class="docutils literal notranslate"><span class="pre">i</span></code>忽略大小写。接着用到了自定义分页的类，按照统一的分页格式，返回序列化器的数据。</p>
<p>最后，重写了update方法，用现有的创建人进行更新。</p>
</div>
<div class="section" id="id3">
<h2>编写前端代码<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>编辑router/index.js，添加路由：</p>
<p><img alt="image11" src="../_images/image-20210323152528120.png" /></p>
<p>编辑views/teprunner/index.vue，添加菜单项：</p>
<p><img alt="image12" src="../_images/image-20210323152610937.png" /></p>
<p>新建views/teprunner/case/CaseManagement.vue文件，增删改查基础代码不再另加赘述，挑选新代码：</p>
<p><img alt="image13" src="../_images/image-20210323154548259.png" /></p>
<p>在运行结果列，添加了超链接，点击后打开用例结果弹窗，这个弹窗查看和运行用例都会用到，用第一个参数type做区分：</p>
<p><img alt="image14" src="../_images/image-20210323154720055.png" /></p>
<p>getResultColor方法返回颜色样式：</p>
<p><img alt="image15" src="../_images/image-20210323154757315.png" /></p>
<p>由于用例结果弹窗和用例列表表格都会有这个字段，于是把resultColor方法提取到了utils/commonMethods.js文件中：</p>
<p><img alt="image16" src="../_images/image-20210323154923859.png" /></p>
<p>CaseManagement.vue是一个父组件，它有3个子组件，如下图所示：</p>
<p><img alt="image17" src="../_images/image-20210323155221608.png" /></p>
<p>通过import后，添加标签代码引入：</p>
<p><img alt="image18" src="../_images/image-20210323155303932.png" /></p>
<p><img alt="image19" src="../_images/image-20210323165621348.png" /></p>
<p>是否显示弹窗通过DialogFormVisible的true/false来控制，DialogTitle指定弹窗标题。<code class="docutils literal notranslate"><span class="pre">:</span></code>开头是父组件向子组件传值，
<code class="docutils literal notranslate"><span class="pre">&#64;</span></code>开头是接受子组件发过来的emit事件通知，从而调用父组件中方法。这样就把这几个组件绑定在一起了！</p>
<blockquote>
<div><p>从这里开始，这几个组件之间的关系会稍微有点绕，读不懂的话多结合源码看看！</p>
</div></blockquote>
<p>有个小细节，运行按钮打开的弹框在关闭后，需要刷新用例列表更新数据，表格超链接打开的弹框关闭后不需要刷新：</p>
<p><img alt="image20" src="../_images/image-20210323155751975.png" /></p>
<p>代码的意思是在打开弹窗时给this.afterCloseRefreshList赋值为true/false，在关闭弹窗时判断要不要刷新列表。</p>
<p>接下来对这三个弹窗逐一进行开发。新建views/teprunner/case/AddCase.vue文件，增改代码不再赘述，添加1个运行按钮：</p>
<p><img alt="image21" src="../_images/image-20210323165523868.png" /></p>
<p>点击后调用：</p>
<p><img alt="image22" src="../_images/image-20210323170858190.png" /></p>
<p>首先校验必填项，校验通过后，发起请求：</p>
<p><img alt="image23" src="../_images/image-20210323170956303.png" /></p>
<p>增加了一个type参数，因为选择保存或者运行，是两种类型，只有点击运行按钮，才用emit注册运行事件。新增用例的时候，没有用例ID，就不能直接运行用例，为了解决这个问题，把保存后接口响应中的ID，作为运行用例ID。</p>
<p>新建views/teprunner/case/CaseResult.vue文件：</p>
<p><img alt="image24" src="../_images/image-20210323171647048.png" /></p>
<p>把代码编辑区设置为只读和自动换行。添加编辑按钮：</p>
<p><img alt="image25" src="../_images/image-20210323171831676.png" /></p>
<p>点击后调用：</p>
<p><img alt="image26" src="../_images/image-20210323171848925.png" /></p>
<p>关闭弹窗，注册编辑事件。</p>
<p>这里把刚才结合到一起说一下，“运行/查看用例结果”弹框和“新增/编辑用例”弹框可以通过运行/编辑按钮相互切换，它们是通过注册事件，发送到父组件CaseManagement.vue，再分别通知下去来实现的：</p>
<p><img alt="image27" src="../_images/image-20210323172147273.png" /></p>
<p>打开结果弹窗后，调用接口查询用例描述和创建人：</p>
<p><img alt="image28" src="../_images/image-20210323172324218.png" /></p>
<p>根据类型执行runCase或getResult：</p>
<p><img alt="image29" src="../_images/image-20210323172428871.png" /></p>
<p>最后，新建views/teprunner/case/WriteDown.vue文件，大同小异，新代码是：</p>
<p><img alt="image30" src="../_images/image-20210323172636470.png" /></p>
<p>从百度搜来的，把后端返回的二进制文件字节流组装成压缩包，打开系统弹窗，下载文件。</p>
</div>
<div class="section" id="id4">
<h2>小插曲<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>这一版比第一版代码优化了不少，尤其是几个组件之间如何传值这里，简化了很多，比如把执行用例从CaseManagement.vue转移到CaseResult.vue中来调用。在折腾过程中，也基本掌握了组件传值的写法，总结如下：</p>
<p>①父组件传值给子组件：子组件props接收，父组件标签绑定data传值，比如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## 父组件</span>
<span class="o">&lt;</span><span class="n">CaseResultDialog</span> <span class="p">:</span><span class="n">runEnv</span><span class="o">.</span><span class="n">sync</span><span class="o">=</span><span class="s2">&quot;runEnv&quot;</span> <span class="o">/&gt;</span>

<span class="n">data</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="n">runEnv</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">},</span>

<span class="c1">## 子组件</span>
<span class="n">props</span><span class="p">:</span> <span class="p">{</span>
  <span class="n">runEnv</span><span class="p">:</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="n">default</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">},</span>
</pre></div>
</div>
<p>②子组件通知父组件：子组件this.$emit注册事件，父组件标签&#64;调用，比如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>## 父组件
&lt;CaseResultDialog
  @closeCaseResultDialog=&quot;closeCaseResultDialog&quot;
/&gt;

closeCaseResultDialog() {
  console.log(&quot;close&quot;);
},

## 子组件
close() {
    this.$emit(&quot;closeCaseResultDialog&quot;);
},
</pre></div>
</div>
<p>③子组件修改父组件传值：先把子组件props赋值给子组件data，再watch子组件data，比如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## 父组件</span>
<span class="o">&lt;</span><span class="n">CaseResultDialog</span> <span class="p">:</span><span class="n">runEnv</span><span class="o">.</span><span class="n">sync</span><span class="o">=</span><span class="s2">&quot;runEnv&quot;</span> <span class="o">/&gt;</span>

<span class="n">data</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="n">runEnv</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">},</span>

<span class="c1">## 子组件</span>
<span class="n">props</span><span class="p">:</span> <span class="p">{</span>
  <span class="n">runEnv</span><span class="p">:</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="n">default</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">},</span>

<span class="n">data</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="n">runEnv</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">runEnv</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">},</span>

<span class="n">watch</span><span class="p">:</span> <span class="p">{</span>
  <span class="n">runEnv</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">caseForm</span><span class="o">.</span><span class="n">runEnv</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">},</span>
</pre></div>
</div>
<blockquote>
<div><p>第一版有很多第三种方式的代码，因为要把CaseManagement的执行结果传到CaseResult中去，在关闭弹窗时又需要清空，这些数据是从CaseManagement传过来的，直接改Vue会报错：禁止子组件直接修改父组件数据，防止数据错乱。比较麻烦，重写这一版优化了很多。</p>
</div></blockquote>
</div>
<div class="section" id="id5">
<h2>小结<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>本文的后端开发除了增删改查，还给出了Django REST
framework函数视图如何引用序列化器，类视图重写方法如何引用非serializer_class绑定序列化器加分页。前端开发稍微有点复杂，尤其是父子组件如何传值，可能结合代码看看会更便于理解。从开篇写到这里，用户管理、项目管理、环境变量、fixtures、用例增删改查、运行用例、结果展示、下载环境，以tep为中间层的测试平台壳子已经做好了，万事已具备，只等pytest注入灵魂。</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="006-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0Django%E5%BC%95%E5%85%A5pytest%E5%AE%8C%E6%95%B4%E6%BA%90%E7%A0%81.html" class="btn btn-neutral float-right" title="6 teprunner测试平台Django引入pytest完整源码" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="004-teprunner%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E7%94%A8%E4%BE%8B%E5%89%8D%E7%BD%AE%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91.html" class="btn btn-neutral float-left" title="4 teprunner测试平台用例前置模块开发" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright dongfanger

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>