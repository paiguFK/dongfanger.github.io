

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7 JMeter关联陌生又熟悉 &mdash; 自动化代码美学 latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/readmore.js"></script>
        <script src="../_static/js/baidutongji.js"></script>
        <script src="../_static/js/valine.js"></script>
        <script src="../_static/js/Valine.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8 JMeter四种参数化方式" href="008-JMeter%E5%9B%9B%E7%A7%8D%E5%8F%82%E6%95%B0%E5%8C%96%E6%96%B9%E5%BC%8F.html" />
    <link rel="prev" title="6 JMeter线程组编辑区揭秘" href="006-JMeter%E7%BA%BF%E7%A8%8B%E7%BB%84%E7%BC%96%E8%BE%91%E5%8C%BA%E6%8F%AD%E7%A7%98.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> 自动化代码美学
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%E5%85%A5%E9%97%A8.html">Python入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%E8%BF%9B%E9%98%B6.html">Python进阶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/pytest%E5%8E%9F%E7%94%9F%E6%A1%86%E6%9E%B6.html">pytest原生框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/tep%E5%BC%80%E6%BA%90%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7.html">tep开源测试工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/teprunner%E5%BC%80%E6%BA%90%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0.html">teprunner开源测试平台</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django.html">Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django%20REST%20framework.html">Django REST framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Locust.html">Locust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Java%E5%85%A5%E9%97%A8.html">Java入门</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/JMeter.html">JMeter</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="001-JMeter%E5%85%A8%E9%83%A8%E7%BB%84%E4%BB%B6%E6%A6%82%E8%A7%88.html">1 JMeter全部组件概览</a></li>
<li class="toctree-l2"><a class="reference internal" href="002-JMeter%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%90%E8%A1%8C%E6%96%BD%E5%8E%8B%E7%9A%84.html">2 JMeter是如何运行施压的</a></li>
<li class="toctree-l2"><a class="reference internal" href="003-JMeter%E8%8B%B1%E6%96%87%E7%89%88%E7%95%8C%E9%9D%A2%E4%BB%8B%E7%BB%8D.html">3 JMeter英文版界面介绍</a></li>
<li class="toctree-l2"><a class="reference internal" href="004-JMeter%E5%85%83%E4%BB%B6%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97.html">4 JMeter元件作用域实践指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="005-JMeter%E6%B5%8B%E8%AF%95%E8%AE%A1%E5%88%92%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%A7%A3%E6%9E%90.html">5 JMeter测试计划配置项解析</a></li>
<li class="toctree-l2"><a class="reference internal" href="006-JMeter%E7%BA%BF%E7%A8%8B%E7%BB%84%E7%BC%96%E8%BE%91%E5%8C%BA%E6%8F%AD%E7%A7%98.html">6 JMeter线程组编辑区揭秘</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7 JMeter关联陌生又熟悉</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">JMeter关联是什么</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">正则表达式提取器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#name">Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apply-to">Apply to</a></li>
<li class="toctree-l4"><a class="reference internal" href="#field-to-check">Field to check</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name-of-created-variable">Name of created variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#regular-expression">Regular Expression</a></li>
<li class="toctree-l4"><a class="reference internal" href="#template-i-where-i-is-capturing-group-number-starts-at-1">Template(<code class="docutils literal notranslate"><span class="pre">$i$</span></code> where i is capturing group number, starts at 1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-no-0-for-random">Match No.(0 for Random)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-value">Default Value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#json-jmespath">JSON JMESPath提取器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#name-1">Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#comments-1">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apply-to-1">Apply to</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name-of-created-variable-1">Name of created variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#jmespath-expressions">JMESPath expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-no-0-for-random-1">Match No.(0 for Random)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-value-1">Default Value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id9">小结</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="008-JMeter%E5%9B%9B%E7%A7%8D%E5%8F%82%E6%95%B0%E5%8C%96%E6%96%B9%E5%BC%8F.html">8 JMeter四种参数化方式</a></li>
<li class="toctree-l2"><a class="reference internal" href="009-JMeter36%E4%B8%AA%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%8F%8A11%E4%B8%AA%E6%96%B0%E5%A2%9E%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D.html">9 JMeter36个内置函数及11个新增函数介绍</a></li>
<li class="toctree-l2"><a class="reference internal" href="010-JMeter%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E5%99%A8%E5%AE%8C%E6%95%B4%E4%BB%8B%E7%BB%8D.html">10 JMeter逻辑控制器完整介绍</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%A4%A7%E6%9D%82%E7%83%A9.html">大杂烩</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E9%9D%A2%E8%AF%95%E9%A2%98.html">面试题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video.html">视频演示(5)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93.html">年度总结</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%88%90%E9%95%BF%E5%B0%8F%E8%AF%B4.html">成长小说</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">联系方式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../link.html">友情链接</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">自动化代码美学</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../chapters/JMeter.html">JMeter</a> &raquo;</li>
        
      <li>7 JMeter关联陌生又熟悉</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/JMeter/007-JMeter关联陌生又熟悉.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="jmeter">
<h1>7 JMeter关联陌生又熟悉<a class="headerlink" href="#jmeter" title="Permalink to this headline">¶</a></h1>
<p><img alt="image1" src="../_images/wanggang2.png" /></p>
<div class="section" id="id1">
<h2>JMeter关联是什么<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>JMeter关联，这几个字看着可能会有点陌生，实际上却是工作中经常会做的一件事情，尤其是接口自动化，它指的是把一个接口的响应作为另一个接口的参数，从而<strong>把接口关联起来</strong>。</p>
<p>JMeter关联是通过后置处理器来实现的，本文将介绍两个主流提取器：正则表达式提取器和JSON
JMESPath提取器。</p>
</div>
<div class="section" id="id2">
<h2>正则表达式提取器<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><img alt="image2" src="../_images/image-20210510205412542.png" /></p>
<div class="section" id="name">
<h3>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h3>
<p>最好有业务含义的名称。</p>
</div>
<div class="section" id="comments">
<h3>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h3>
<p>可以为空的注释。</p>
</div>
<div class="section" id="apply-to">
<h3>Apply to<a class="headerlink" href="#apply-to" title="Permalink to this headline">¶</a></h3>
<p>匹配范围。</p>
<p><strong>Main sample and sub-samples</strong></p>
<p>匹配当前父取样器及其子取样器。</p>
<p><strong>Main sample only</strong></p>
<p>仅匹配当前父取样器。</p>
<p><strong>Sub-samples only</strong></p>
<p>仅匹配子取样器。</p>
<p><strong>JMeter Variable Name to use</strong></p>
<p>匹配JMeter变量。</p>
</div>
<div class="section" id="field-to-check">
<h3>Field to check<a class="headerlink" href="#field-to-check" title="Permalink to this headline">¶</a></h3>
<p>匹配响应的字段，共七个选项。</p>
<p><strong>Body</strong>：主体，最常用。</p>
<p><strong>Body(unescaped)</strong>
：替换了所有的html转义符的响应主体内容，注意html转义符处理时不考虑上下文，因此可能有不正确的转换，不太建议使用。</p>
<p><strong>Body as a
Document</strong>：从不同类型的文件中提取文本，注意这个选项比较影响性能。</p>
<p><strong>Response Headers</strong>：响应Headers。</p>
<p><strong>Request Headers</strong>：请求Headers。</p>
<p><strong>URL</strong>：请求URL。</p>
<p><strong>Response Code</strong>：响应代码，比如200、404返回码。</p>
<p><strong>Response Message</strong>：响应信息，比如“成功”、“OK”字样。</p>
</div>
<div class="section" id="name-of-created-variable">
<h3>Name of created variable<a class="headerlink" href="#name-of-created-variable" title="Permalink to this headline">¶</a></h3>
<p>创建的变量名，比如变量名为token，通过<code class="docutils literal notranslate"><span class="pre">${token}</span></code>进行访问。</p>
</div>
<div class="section" id="regular-expression">
<h3>Regular Expression<a class="headerlink" href="#regular-expression" title="Permalink to this headline">¶</a></h3>
<p><strong>正则表达式。</strong></p>
<blockquote>
<div><p>正则表达式可阅读这篇文章进一步了解：<a class="reference external" href="https://dongfanger.gitee.io/blog/未分类/001-5分钟轻松学正则表达式.html">https://dongfanger.gitee.io/blog/未分类/001-5分钟轻松学正则表达式.html</a></p>
</div></blockquote>
</div>
<div class="section" id="template-i-where-i-is-capturing-group-number-starts-at-1">
<h3>Template(<code class="docutils literal notranslate"><span class="pre">$i$</span></code> where i is capturing group number, starts at 1)<a class="headerlink" href="#template-i-where-i-is-capturing-group-number-starts-at-1" title="Permalink to this headline">¶</a></h3>
<p>用<code class="docutils literal notranslate"><span class="pre">$$</span></code>引用起来，如果在正则表达式中有多个正则表达式（多个括号括起来的），则可以是<code class="docutils literal notranslate"><span class="pre">$1$</span></code>、<code class="docutils literal notranslate"><span class="pre">$2$</span></code>等等，<code class="docutils literal notranslate"><span class="pre">$1$</span></code>指第一个模板，<code class="docutils literal notranslate"><span class="pre">$2$</span></code>指第二个模板，依次类推，<code class="docutils literal notranslate"><span class="pre">$0$</span></code>指全文匹配，<code class="docutils literal notranslate"><span class="pre">$1$$2$</span></code>指同时取第一个和第二个模板。</p>
</div>
<div class="section" id="match-no-0-for-random">
<h3>Match No.(0 for Random)<a class="headerlink" href="#match-no-0-for-random" title="Permalink to this headline">¶</a></h3>
<p>在匹配时往往会出现多个值匹配的情况，如果匹配数为0则代表随机取匹配值；可以用匹配数字来确定多个值中的哪一个；负数取所有值，可以与For
Each Controller一起使用来遍历。</p>
</div>
<div class="section" id="default-value">
<h3>Default Value<a class="headerlink" href="#default-value" title="Permalink to this headline">¶</a></h3>
<p>默认值，如果没有匹配到可以指定一个默认值。</p>
<p>Use empty default
value勾选后把空作为默认值，跟不填写效果一样。如果填写了默认值同时勾选此选项，默认值仍然为空。</p>
</div>
</div>
<div class="section" id="json-jmespath">
<h2>JSON JMESPath提取器<a class="headerlink" href="#json-jmespath" title="Permalink to this headline">¶</a></h2>
<p><img alt="image3" src="../_images/image-20210510205427584.png" /></p>
<div class="section" id="name-1">
<span id="id3"></span><h3>Name<a class="headerlink" href="#name-1" title="Permalink to this headline">¶</a></h3>
<p>最好有业务含义的名称。</p>
</div>
<div class="section" id="comments-1">
<span id="id4"></span><h3>Comments<a class="headerlink" href="#comments-1" title="Permalink to this headline">¶</a></h3>
<p>可以为空的注释。</p>
</div>
<div class="section" id="apply-to-1">
<span id="id5"></span><h3>Apply to<a class="headerlink" href="#apply-to-1" title="Permalink to this headline">¶</a></h3>
<p>匹配范围。</p>
<p><strong>Main sample and sub-samples</strong></p>
<p>匹配当前父取样器及其子取样器。</p>
<p><strong>Main sample only</strong></p>
<p>仅匹配当前父取样器。</p>
<p><strong>Sub-samples only</strong></p>
<p>仅匹配子取样器。</p>
<p><strong>JMeter Variable Name to use</strong></p>
<p>匹配JMeter变量。</p>
</div>
<div class="section" id="name-of-created-variable-1">
<span id="id6"></span><h3>Name of created variable<a class="headerlink" href="#name-of-created-variable-1" title="Permalink to this headline">¶</a></h3>
<p>创建的变量名，比如变量名为token，通过<code class="docutils literal notranslate"><span class="pre">${token}</span></code>进行访问。</p>
</div>
<div class="section" id="jmespath-expressions">
<h3>JMESPath expressions<a class="headerlink" href="#jmespath-expressions" title="Permalink to this headline">¶</a></h3>
<p><strong>JMESPath表达式。</strong></p>
<blockquote>
<div><p>可以访问官网进一步了解：<a class="reference external" href="https://jmespath.org/">https://jmespath.org/</a></p>
</div></blockquote>
</div>
<div class="section" id="match-no-0-for-random-1">
<span id="id7"></span><h3>Match No.(0 for Random)<a class="headerlink" href="#match-no-0-for-random-1" title="Permalink to this headline">¶</a></h3>
<p>在匹配时往往会出现多个值匹配的情况，如果匹配数为0则代表随机取匹配值；可以用匹配数字来确定多个值中的哪一个；负数取所有值，可以与For
Each Controller一起使用来遍历。</p>
</div>
<div class="section" id="default-value-1">
<span id="id8"></span><h3>Default Value<a class="headerlink" href="#default-value-1" title="Permalink to this headline">¶</a></h3>
<p>默认值，如果没有匹配到可以指定一个默认值。</p>
</div>
</div>
<div class="section" id="id9">
<h2>小结<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>本文首先介绍了JMeter关联的概念，实际上指的就是把一个接口的响应作为另一个接口的参数，从而把接口关联起来。然后分别以元件编辑区为内容，讲解了JMeter关联常用的两个后置处理器：正则表达式提取器和JSON
JMESPath提取器。</p>
<blockquote>
<div><p>参考资料：</p>
<p>《全栈性能测试修炼宝典JMeter实战》</p>
<p><a class="reference external" href="https://blog.csdn.net/weixin_43507959/article/details/104068508">https://blog.csdn.net/weixin_43507959/article/details/104068508</a></p>
<p><a class="reference external" href="https://blog.csdn.net/doubledog1112/article/details/93480458">https://blog.csdn.net/doubledog1112/article/details/93480458</a></p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="008-JMeter%E5%9B%9B%E7%A7%8D%E5%8F%82%E6%95%B0%E5%8C%96%E6%96%B9%E5%BC%8F.html" class="btn btn-neutral float-right" title="8 JMeter四种参数化方式" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="006-JMeter%E7%BA%BF%E7%A8%8B%E7%BB%84%E7%BC%96%E8%BE%91%E5%8C%BA%E6%8F%AD%E7%A7%98.html" class="btn btn-neutral float-left" title="6 JMeter线程组编辑区揭秘" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright dongfanger

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>