

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6 JMeter线程组编辑区揭秘 &mdash; 自动化代码美学 latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/readmore.js"></script>
        <script src="../_static/js/baidutongji.js"></script>
        <script src="../_static/js/valine.js"></script>
        <script src="../_static/js/Valine.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7 JMeter关联陌生又熟悉" href="007-JMeter%E5%85%B3%E8%81%94%E9%99%8C%E7%94%9F%E5%8F%88%E7%86%9F%E6%82%89.html" />
    <link rel="prev" title="5 JMeter测试计划配置项解析" href="005-JMeter%E6%B5%8B%E8%AF%95%E8%AE%A1%E5%88%92%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%A7%A3%E6%9E%90.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> 自动化代码美学
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../preface.html">前言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Java%E5%85%A5%E9%97%A8.html">Java入门</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/JMeter.html">JMeter</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="001-JMeter%E5%85%A8%E9%83%A8%E7%BB%84%E4%BB%B6%E6%A6%82%E8%A7%88.html">1 JMeter全部组件概览</a></li>
<li class="toctree-l2"><a class="reference internal" href="002-JMeter%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%90%E8%A1%8C%E6%96%BD%E5%8E%8B%E7%9A%84.html">2 JMeter是如何运行施压的</a></li>
<li class="toctree-l2"><a class="reference internal" href="003-JMeter%E8%8B%B1%E6%96%87%E7%89%88%E7%95%8C%E9%9D%A2%E4%BB%8B%E7%BB%8D.html">3 JMeter英文版界面介绍</a></li>
<li class="toctree-l2"><a class="reference internal" href="004-JMeter%E5%85%83%E4%BB%B6%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97.html">4 JMeter元件作用域实践指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="005-JMeter%E6%B5%8B%E8%AF%95%E8%AE%A1%E5%88%92%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%A7%A3%E6%9E%90.html">5 JMeter测试计划配置项解析</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6 JMeter线程组编辑区揭秘</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#name">Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#action-to-be-taken-after-a-sampler-error">Action to be taken after a Sampler error</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thread-properties">Thread Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#number-of-threads-users">Number of Threads (users)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ramp-up-period-seconds">Ramp-up period (seconds)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ramp-up-period"><strong>Ramp-up period如何设置？</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#loop-count">Loop Count</a></li>
<li class="toctree-l4"><a class="reference internal" href="#same-user-on-each-iteration">Same user on each iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delay-thread-creation-until-needed">Delay Thread creation until needed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specify-thread-lifetime">Specify Thread lifetime</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id1">小结</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="007-JMeter%E5%85%B3%E8%81%94%E9%99%8C%E7%94%9F%E5%8F%88%E7%86%9F%E6%82%89.html">7 JMeter关联陌生又熟悉</a></li>
<li class="toctree-l2"><a class="reference internal" href="008-JMeter%E5%9B%9B%E7%A7%8D%E5%8F%82%E6%95%B0%E5%8C%96%E6%96%B9%E5%BC%8F.html">8 JMeter四种参数化方式</a></li>
<li class="toctree-l2"><a class="reference internal" href="009-JMeter36%E4%B8%AA%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%8F%8A11%E4%B8%AA%E6%96%B0%E5%A2%9E%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D.html">9 JMeter36个内置函数及11个新增函数介绍</a></li>
<li class="toctree-l2"><a class="reference internal" href="010-JMeter%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E5%99%A8%E5%AE%8C%E6%95%B4%E4%BB%8B%E7%BB%8D.html">10 JMeter逻辑控制器完整介绍</a></li>
<li class="toctree-l2"><a class="reference internal" href="011-JMeter%E5%AE%9A%E6%97%B6%E5%99%A8%E8%AE%BE%E7%BD%AE%E5%BB%B6%E8%BF%9F%E4%B8%8E%E5%90%8C%E6%AD%A5.html">11 JMeter定时器设置延迟与同步</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%E5%85%A5%E9%97%A8.html">Python入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Python%E8%BF%9B%E9%98%B6.html">Python进阶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/pytest%E5%8E%9F%E7%94%9F%E6%A1%86%E6%9E%B6.html">pytest原生框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/tep%E5%BC%80%E6%BA%90%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7.html">tep开源测试工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/teprunner%E5%BC%80%E6%BA%90%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0.html">teprunner开源测试平台</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django.html">Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Django%20REST%20framework.html">Django REST framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/Locust.html">Locust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%A4%A7%E6%9D%82%E7%83%A9.html">大杂烩</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93.html">年度总结</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%88%90%E9%95%BF%E5%B0%8F%E8%AF%B4.html">成长小说</a></li>
<li class="toctree-l1"><a class="reference internal" href="../question.html">面试题库</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">联系方式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../link.html">友情链接</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">自动化代码美学</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../chapters/JMeter.html">JMeter</a> &raquo;</li>
        
      <li>6 JMeter线程组编辑区揭秘</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/JMeter/006-JMeter线程组编辑区揭秘.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="jmeter">
<h1>6 JMeter线程组编辑区揭秘<a class="headerlink" href="#jmeter" title="Permalink to this headline">¶</a></h1>
<p><img alt="image1" src="../_images/wanggang2.png" /></p>
<p>线程组编辑区如下：</p>
<p><img alt="image2" src="../_images/20201110113440953.png" /></p>
<p>有点复杂，但是慢慢看下来，还是比较容易理解。</p>
<div class="section" id="name">
<h2>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p>带有业务含义的名字。</p>
</div>
<div class="section" id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<p>线程组的备注说明。</p>
</div>
<div class="section" id="action-to-be-taken-after-a-sampler-error">
<h2>Action to be taken after a Sampler error<a class="headerlink" href="#action-to-be-taken-after-a-sampler-error" title="Permalink to this headline">¶</a></h2>
<p>取样器报错后执行动作。有5个选项：Continue，Start Next Thread Loop，Stop
Thread，Stop Test，Stop Test
Now。为了搞懂这几个选项，我画了张时序图进行说明：</p>
<p><img alt="image3" src="../_images/20201110113504440.png" /></p>
<ul class="simple">
<li><p>图中有一个线程，在最左边。</p></li>
<li><p>右边有两个迭代：迭代1和迭代2。</p></li>
<li><p>每个迭代有两个请求，第一个请求失败。</p></li>
<li><p><strong>Stop
Thread是直接结束线程，没有画出来，一般不会设置此项，不然会导致运行线程越来越少，最后负载不够，对服务器的压力不够，测试结果不具参考性。</strong></p></li>
<li><p>剩余4个选项用红色字体标注了出来。</p></li>
</ul>
<p>线程在第一个迭代的第一个请求失败了。Continue表示继续执行第二个请求，再执行第二个迭代；Start
Next Thread Loop表示忽略第二个请求，跳到第二个迭代执行；Stop
Test表示把当前迭代的第二个请求执行完后，停止测试；Stop Test
Now表示从第一个请求失败这里直接结束测试。</p>
<p><strong>JMeter默认选项是Continue，保证足够的并发压力。</strong>我们在大量用户并发时，服务器偶尔响应错误是正常现象，比如服务器由于性能问题500，此时出错我们正好要记录下来，作为有性能问题的依据。</p>
<p>如果想减少关联请求报错，可以选择Start Next Thread Loop。</p>
</div>
<div class="section" id="thread-properties">
<h2>Thread Properties<a class="headerlink" href="#thread-properties" title="Permalink to this headline">¶</a></h2>
<div class="section" id="number-of-threads-users">
<h3>Number of Threads (users)<a class="headerlink" href="#number-of-threads-users" title="Permalink to this headline">¶</a></h3>
<p>线程组的线程数量。</p>
</div>
<div class="section" id="ramp-up-period-seconds">
<h3>Ramp-up period (seconds)<a class="headerlink" href="#ramp-up-period-seconds" title="Permalink to this headline">¶</a></h3>
<p>启动时间，线程组在多少秒内启动完所有线程。</p>
<p>比如设置线程数为50，设置启动时间为10秒，那么每秒就会启动50 / 10 =
5个线程；如果设置为0秒，则50个线程会立刻启动；如果设置为100秒，就会每隔100
/ 50 = 2秒启动1个线程。</p>
</div>
<div class="section" id="ramp-up-period">
<h3><strong>Ramp-up period如何设置？</strong><a class="headerlink" href="#ramp-up-period" title="Permalink to this headline">¶</a></h3>
<p>以下是5个线程依次从启动到执行到退出的示意图：</p>
<p><img alt="image4" src="../_images/20201110113455823.png" /></p>
<p><strong>JMeter线程组产生的并发压力，实际上是红色框起来的那部分，在这个时间段才是所有线程在并发着运行。</strong></p>
<p>先从Ramp-up period设置最小和最大来分析这个问题：</p>
<ol class="arabic simple">
<li><p>假设有3000个线程，只迭代1次，如果设置为0秒，那么测试一开始就会产生3000个并发请求，说不定直接把服务器压崩了，还没开始就结束了。</p></li>
<li><p>假设有10个线程，只迭代1次，如果设置为100秒，那么每隔10秒启动1个线程，很可能前一个线程跑完了，下一个线程还没启起来，某一时刻最多只有1个线程在跑，没有并发压力。</p></li>
</ol>
<p>接着看看该设置成多少？这个答案我找了很多资料，都没有明确的说法。结合实践经验来谈的话，既不能太小，也不能太大，可以根据业务场景、硬件配置、系统资源来进行设置。</p>
</div>
<div class="section" id="loop-count">
<h3>Loop Count<a class="headerlink" href="#loop-count" title="Permalink to this headline">¶</a></h3>
<p>迭代次数。</p>
<ul class="simple">
<li><p>填写数字，指定迭代次数。</p></li>
<li><p>勾选Infinite，无限迭代，一直运行到测试停止或异常崩溃。</p></li>
</ul>
</div>
<div class="section" id="same-user-on-each-iteration">
<h3>Same user on each iteration<a class="headerlink" href="#same-user-on-each-iteration" title="Permalink to this headline">¶</a></h3>
<p>每个迭代都用相同的user（线程）。</p>
<p><strong>默认这个选项是勾选的。</strong>因为销毁和创建线程本身就会占用资源，可能会影响性能测试结果。</p>
<p>什么时候去掉勾选呢？比如登录，加了HTTP
Cookie管理器以后，单个线程多次迭代（注意不是多个线程哦）登录用的都是相同的Cookie。去掉勾选后，同时在HTTP
Cookie管理器选择清除旧Cookie：</p>
<p><img alt="image5" src="../_images/20201110113512758.png" /></p>
<p>那么每次迭代就能用不同Cookie了。</p>
</div>
<div class="section" id="delay-thread-creation-until-needed">
<h3>Delay Thread creation until needed<a class="headerlink" href="#delay-thread-creation-until-needed" title="Permalink to this headline">¶</a></h3>
<p>保持默认就好。跟JVM创建线程时机有关，实际运用勾不勾选都不影响测试结果。</p>
</div>
<div class="section" id="specify-thread-lifetime">
<h3>Specify Thread lifetime<a class="headerlink" href="#specify-thread-lifetime" title="Permalink to this headline">¶</a></h3>
<p><strong>Duration</strong></p>
<p>持续时间，单位秒。</p>
<p>前面的Loop Count勾选了Infinite，Duration才会生效。</p>
<p><strong>Startup delay</strong></p>
<p>启动延迟，单位秒。</p>
<p>延迟到多少秒后再启动线程。</p>
</div>
</div>
<div class="section" id="id1">
<h2>小结<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>本文对线程组编辑区进行了揭秘，看似复杂，实则简单，问题在于实际使用过程中如何结合业务来设置，这需要实践经验不断积累才能找到答案。需要注意的是，如果Ramp-up
period设置不当，有可能100个线程只能产生1个并发请求。</p>
<blockquote>
<div><p>参考资料：</p>
<p>《全栈性能测试修炼宝典JMeter实战》</p>
<p><a class="reference external" href="https://www.cnblogs.com/hjhsysu/p/9189897.html">https://www.cnblogs.com/hjhsysu/p/9189897.html</a></p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="007-JMeter%E5%85%B3%E8%81%94%E9%99%8C%E7%94%9F%E5%8F%88%E7%86%9F%E6%82%89.html" class="btn btn-neutral float-right" title="7 JMeter关联陌生又熟悉" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="005-JMeter%E6%B5%8B%E8%AF%95%E8%AE%A1%E5%88%92%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%A7%A3%E6%9E%90.html" class="btn btn-neutral float-left" title="5 JMeter测试计划配置项解析" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright dongfanger

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>